import{h as l,l as H,e as G,E as W,o as S,c as I,b as e,s as X,j,a as v,w as Y,u as J,k as d,v as D,t as c,z as C,A as u,F as K,B as Q}from"./app-3beeeaef.js";import{P as m,D as _,S as Z,c as ee,s as x,a as te}from"./config-d6fbb0e2.js";const oe={className:"flex justify-center"},se={className:"w-full"},le={className:"bg-blue-400 border border-blue-400 text-blue-700 px-4 py-3 rounded relative",role:"alert"},ae={className:"flex justify-around items-center"},ne=e("i",{className:"fa-solid fa-circle-plus mx-1"},null,-1),re=e("i",{className:"fa-solid fa-circle-plus mx-1"},null,-1),de=e("i",{className:"fa-solid fa-circle-plus mx-1"},null,-1),ie={class:"flex justify-center"},ce={class:"w-full"},ue={class:"bg-gray-400 border border-blue-400 text-blue-700 px-4 py-3 rounded relative",role:"alert"},me={class:"flex justify-between items-center"},be=e("label",{for:"datepicker",class:"block text-sm font-medium text-gray-700 mr-3"},"Selecciona una fecha",-1),fe={class:"flex items-center"},pe=e("button",{type:"button",class:"ml-2 px-4 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:border-blue-700 focus:ring-blue-300"}," Botón ",-1),ge={class:"flex justify-center"},ve={class:"w-full"},_e={class:"bg-gray-400 border border-blue-400 text-blue-700 px-4 py-3 rounded relative",role:"alert"},xe={class:"flex justify-between items-center"},he=e("label",{for:"startDate",class:"block text-sm font-medium text-gray-700 mr-3"},"Desde",-1),ye=e("label",{for:"endDate",class:"block text-sm font-medium text-gray-700 ml-4 mr-3"},"Hasta",-1),we={className:"border px-5 py-5  border-primary-400 rounded-md shadow  mb-3"},ke={className:"md:col-span-12 lg:col-span-12 col-span-12"},Ne={class:"overflow-x-auto"},je=e("thead",null,[e("tr",null,[e("th",{class:"px-4 py-2 { 'invisible': !columnsVisible.id }"},"Id"),e("th",{class:"px-4 py-2 { 'invisible': !columnsVisible.id }"},"porcentaje_c_v"),e("th",{class:"px-4 py-2 { 'invisible': !columnsVisible.id }"},"plataforma_id"),e("th",{class:"px-4 py-2 { 'invisible': !columnsVisible.id }"},"codigo_sede")])],-1),De={id:"default-modal",class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 overflow-y-auto"},Ce={class:"bg-white rounded-lg shadow-lg max-w-md w-full h-full overflow-y-auto"},Re={class:"flex items-center justify-between p-4 border-b"},Ve={class:"text-xl font-semibold text-gray-900"},Me=e("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})],-1),Te=e("span",{class:"sr-only"},"Cerrar Modal",-1),Ee=[Me,Te],Se={class:"p-4 space-y-4 overflow-y-auto"},Ie={className:"my-2"},Ae={className:"text-xl font-thin mb-4"},Be={className:"mb-4"},Ue=e("label",{for:"porcentaje_c_v",className:"block mb-1"},"DNI",-1),$e=e("p",{className:"text-sm text-gray-500 mt-1"},"Ingrese el nombre del administrador.",-1),ze={className:"mb-4"},Pe=e("label",{for:"plataforma_id",className:"block mb-1"},"DEPARTAMENTO",-1),Oe=e("p",{className:"text-sm text-gray-500 mt-1"},"Ingrese el nombre del administrador.",-1),Fe={className:"mb-4"},qe=e("label",{for:"codigo_sede",className:"block mb-1"},"PROVINCIA",-1),Le=e("p",{className:"text-sm text-gray-500 mt-1"},"Ingrese el nombre del administrador.",-1),He={class:"flex items-center justify-end p-4 border-t"},Ge=e("button",{type:"submit",class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5"},"Aceptar",-1),We={id:"default-modal",class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 overflow-y-auto"},Xe={class:"bg-white rounded-lg shadow-lg max-w-md w-full h-full overflow-y-auto"},Ye={class:"flex items-center justify-between p-4 border-b"},Je={class:"text-xl font-semibold text-gray-900"},Ke=e("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})],-1),Qe=e("span",{class:"sr-only"},"Cerrar Modal",-1),Ze=[Ke,Qe],et={class:"p-4 space-y-4 overflow-y-auto"},tt={className:"my-2"},ot={className:"text-xl font-thin mb-4"},st={className:"mb-4"},lt=e("label",{for:"porcentaje_c_v",className:"block mb-1"},"% CLIENTE",-1),at=e("p",{className:"text-sm text-gray-500 mt-1"},"Ingrese el nombre del administrador.",-1),nt={className:"mb-4"},rt=e("label",{for:"plataforma_id",className:"block mb-1"},"PLATAFORMA ID",-1),dt=e("p",{className:"text-sm text-gray-500 mt-1"},"Ingrese el nombre del administrador.",-1),it={className:"mb-4"},ct=e("label",{for:"codigo_sede",className:"block mb-1"},"CODIGO SEDE",-1),ut=e("p",{className:"text-sm text-gray-500 mt-1"},"Ingrese el nombre del administrador.",-1),mt={class:"flex items-center justify-end p-4 border-t"},bt=e("button",{type:"submit",class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5"},"Aceptar",-1),ft={id:"default-modal",class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 overflow-y-auto"},pt={class:"bg-white rounded-lg shadow-lg max-w-md w-full h-screen-70 overflow-y-auto"},gt={class:"flex items-center justify-between p-4 border-b"},vt={class:"text-xl font-semibold text-gray-900"},_t=e("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})],-1),xt=e("span",{class:"sr-only"},"Cerrar Modal",-1),ht=[_t,xt],yt={class:"p-4 space-y-4 overflow-y-auto"},wt={class:"my-2"},kt={class:"text-xl font-thin mb-4"},Nt=e("div",{class:"mb-4"},[e("label",{for:"documento",class:"block text-sm font-medium text-gray-700"},"Subir documento"),e("input",{type:"file",id:"documento",name:"documento",class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})],-1),jt={class:"flex items-center justify-end p-4 border-t"},Dt=e("button",{type:"submit",class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5"},"Subir Documento",-1),Vt={__name:"Index",props:{datos:Array},setup(A){m.use(_),m.use(_);const B=A,r=l(),R=l([]),V=l([]),b=l([]),U=l(!1),f=l(!1),h=l(""),p=l(!1),y=l(""),w=l(!1),M=l(new Date),k=l(new Date),N=l(new Date),g=l(!1),$=s=>{modalTitleUpload.value=s,g.value=!0,console.log("mensjae de exito")};H(()=>{b.value=B.datos,console.log(b)}),G(()=>{U.value=!0,r.value.dt.on("deselect",F),r.value.dt.on("deselect",T)});const i=l({id:"",porcentaje_c_v:"",plataforma_id:"",codigo_sede:""}),a=l({id:"",porcentaje_c_v:"",plataforma_id:"",codigo_sede:""});m.use(_),m.use(_),R.value=[{data:null,render:function(s,t,n,o){return o.row+1}},{data:"porcentaje_c_v"},{data:"plataforma_id"},{data:"codigo_sede"}],V.value=[{title:"Detalle Transacción",extend:"excelHtml5",text:'<i class="fa-solid fa-file-excel"></i> Excel',className:"bg-green-500 text-white px-4 py-2 rounded my-2 hover:bg-green-600 focus:outline-none"},{title:"Detalle Transacción",extend:"print",text:'<i class="fa-solid fa-print"></i> PRINT',className:"bg-gray-800 text-white px-4 py-2 rounded my-2 hover:bg-gray-900 focus:outline-none"},{title:"Detalle Transacción",extend:"copy",text:'<i class="fa-solid fa-copy"></i> COPY',className:"bg-gray-400 text-white px-4 py-2 rounded my-2 hover:bg-gray-500 focus:outline-none"}];const z=()=>{const s=r.value.dt.rows({selected:!0}).data().toArray();if(s.length>0){const t=s[0].id,n=s[0].contacto;Z.mixin({buttonStyling:!0}).fire({title:"¿Está seguro de querer borrar el registro "+n+":"+t+"?",icon:"question",showCancelButton:!0,confirmButtonText:'<i class="fa fa-solid fa-check"></i> Sí, borrar',cancelButtonText:'<i class="fa fa-solid fa-times"></i> Cancelar'}).then(L=>{L.isConfirmed&&ee(plataforma,"https://reportes.kingtech.pe/transactiondetail"+t,"")})}else x("Debe seleccionar una fila antes de poder borrarla","error")},P=s=>{h.value=s,f.value=!0,console.log("mensjae de exito")},O=s=>{if(r.value.dt.rows({selected:!0}).count()===0){x("Debe seleccionar una fila antes de editar","error");return}const n=r.value.dt.rows({selected:!0}).data().toArray()[0];if(!n){x("No se encontraron datos para la fila seleccionada","error");return}a.value.porcentaje_c_v=n.porcentaje_c_v,a.value.plataforma_id=n.plataforma_id,a.value.codigo_sede=n.codigo_sede,console.log(b),y.value=s,p.value=!0},T=s=>{const t=r.value.dt.rows({selected:!0}).count();w.value=t>0},F=s=>{const t=r.value.dt.rows({selected:!0}).count();w.value=t>0},E=()=>{const s=r.value.dt.rows({selected:!0}).data().toArray();s.length>0?(s[0],a.value.porcentaje_c_v=selectedRowsData.porcentaje_c_v,a.value.grupo=selectedRowsData.codigo_sede,a.value.plataforma_id=selectedRowsData.plataforma_id,a.value.codigo_sede=selectedRowsData.codigo_sede,console.log(a),te("PUT",a.value,"https://reportes.kingtech.pe/transactiondetail/"+id,"")):x("debe selccionar uan fila antes de poder editarla","error")},q=()=>{const s=new FormData;s.append("file",fileInput.value.files[0]),Q.post("/api/importar-clientes",s,{headers:{"Content-Type":"multipart/form-data"}}).then(t=>{console.log("Archivo importado correctamente:",t.data.message)}).catch(t=>{console.error("Error al importar archivo:",t)})};return(s,t)=>{const n=W("datepicker");return S(),I(K,null,[e("div",oe,[e("div",se,[e("div",le,[e("div",ae,[w.value?X("",!0):(S(),I("button",{key:0,"data-modal-target":"default-modal",onClick:t[0]||(t[0]=o=>P("Crear")),"data-modal-toggle":"default-modal",className:"block text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",type:"button"}," Crear Registro ")),e("button",{onClick:t[1]||(t[1]=o=>O("Editar")),className:" btn btn-lg block text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",type:"button"},[ne,j("Editar Registro ")]),e("button",{onClick:t[2]||(t[2]=o=>$("Subir Documento en Excel")),className:" btn btn-lg block text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",type:"button"},[re,j("Subir Excel ")]),e("button",{onClick:t[3]||(t[3]=o=>z()),className:"btn btn-lg block text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",type:"button"},[de,j(" Borrar Registro ")])])])])]),e("div",ie,[e("div",ce,[e("div",ue,[e("div",me,[be,e("div",fe,[v(n,{modelValue:M.value,"onUpdate:modelValue":t[4]||(t[4]=o=>M.value=o),id:"datepicker",class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},null,8,["modelValue"]),pe])])])])]),e("div",ge,[e("div",ve,[e("div",_e,[e("div",xe,[he,v(n,{modelValue:k.value,"onUpdate:modelValue":t[5]||(t[5]=o=>k.value=o),id:"startDate",class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},null,8,["modelValue"]),ye,v(n,{modelValue:N.value,"onUpdate:modelValue":t[6]||(t[6]=o=>N.value=o),id:"endDate",class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},null,8,["modelValue"]),e("button",{type:"button",class:"ml-4 px-4 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:border-blue-700 focus:ring-blue-300",onClick:t[7]||(t[7]=o=>s.filterByDates(k.value,N.value))}," Filtrar ")])])])]),e("div",we,[e("div",ke,[e("div",Ne,[v(J(m),{data:b.value,columns:R.value,ref_key:"table",ref:r,class:"display",options:{select:!0,responsive:!0,autoWidth:!1,dom:"Bfrtip",buttons:V.value,pageLength:10,scrollX:!0},onSelect:T},{default:Y(()=>[je]),_:1},8,["data","columns","options"])])])]),d(e("div",De,[e("div",Ce,[e("div",Re,[e("h3",Ve,c(y.value),1),e("button",{onClick:t[8]||(t[8]=o=>p.value=!1),type:"button",class:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 flex justify-center items-center"},Ee)]),e("div",Se,[e("form",{onSubmit:C(E,["prevent"]),classNaem:"max-w-lg mx-auto border border-gray-300 p-6 my-5 rounded-lg overflow-y-auto"},[e("div",Ie,[e("h2",Ae,c(y.value),1)]),e("div",Be,[Ue,d(e("input",{type:"text",id:"porcentaje_c_v",className:"form-input w-full","onUpdate:modelValue":t[9]||(t[9]=o=>a.value.porcentaje_c_v=o)},null,512),[[u,a.value.porcentaje_c_v]]),$e]),e("div",ze,[Pe,d(e("input",{type:"text",id:"plataforma_id",className:"form-input w-full","onUpdate:modelValue":t[10]||(t[10]=o=>a.value.plataforma_id=o)},null,512),[[u,a.value.plataforma_id]]),Oe]),e("div",Fe,[qe,d(e("input",{type:"text",id:"codigo_sede",className:"form-input w-full","onUpdate:modelValue":t[11]||(t[11]=o=>a.value.codigo_sede=o)},null,512),[[u,a.value.codigo_sede]]),Le]),e("div",He,[Ge,e("button",{onClick:t[12]||(t[12]=o=>p.value=!1),type:"button",class:"ml-3 text-sm font-medium text-gray-900 bg-white border border-gray-200 rounded-lg hover:bg-white px-5 py-2.5"},"Rechazar")])],32)])])],512),[[D,p.value]]),d(e("div",We,[e("div",Xe,[e("div",Ye,[e("h3",Je,c(h.value),1),e("button",{onClick:t[13]||(t[13]=o=>f.value=!1),type:"button",class:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 flex justify-center items-center"},Ze)]),e("div",et,[e("form",{onSubmit:C(E,["prevent"]),classNaem:"max-w-lg mx-auto border border-gray-300 p-6 my-5 rounded-lg overflow-y-auto"},[e("div",tt,[e("h2",ot,c(h.value),1)]),e("div",st,[lt,d(e("input",{type:"text",id:"porcentaje_c_v",className:"form-input w-full","onUpdate:modelValue":t[14]||(t[14]=o=>i.value.porcentaje_c_v=o)},null,512),[[u,i.value.porcentaje_c_v]]),at]),e("div",nt,[rt,d(e("input",{type:"text",id:"plataforma_id",className:"form-input w-full","onUpdate:modelValue":t[15]||(t[15]=o=>i.value.plataforma_id=o)},null,512),[[u,i.value.plataforma_id]]),dt]),e("div",it,[ct,d(e("input",{type:"text",id:"codigo_sede",className:"form-input w-full","onUpdate:modelValue":t[16]||(t[16]=o=>i.value.codigo_sede=o)},null,512),[[u,i.value.codigo_sede]]),ut]),e("div",mt,[bt,e("button",{onClick:t[17]||(t[17]=o=>f.value=!1),type:"button",class:"ml-3 text-sm font-medium text-gray-900 bg-white border border-gray-200 rounded-lg hover:bg-white px-5 py-2.5"},"Rechazar")])],32)])])],512),[[D,f.value]]),d(e("div",ft,[e("div",pt,[e("div",gt,[e("h3",vt,c(s.modalTitleUpload),1),e("button",{onClick:t[18]||(t[18]=o=>g.value=!1),type:"button",class:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 flex justify-center items-center"},ht)]),e("div",yt,[e("form",{onSubmit:C(q,["prevent"]),enctype:"multipart/form-data",class:"max-w-lg mx-auto border border-gray-300 p-6 my-5 rounded-lg overflow-y-auto"},[e("div",wt,[e("h2",kt,c(s.modalTitleUpload),1)]),Nt,e("div",jt,[Dt,e("button",{onClick:t[19]||(t[19]=o=>g.value=!1),type:"button",class:"ml-3 text-sm font-medium text-gray-900 bg-white border border-gray-200 rounded-lg hover:bg-white px-5 py-2.5"},"Rechazar")])],32)])])],512),[[D,g.value]])],64)}}};export{Vt as default};
